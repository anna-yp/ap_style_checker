from openai import OpenAI
client = OpenAI()


class Prompt:
    def __init__(self):
        self.client = OpenAI()
    
    def synthesize(self, docs, query):
        stream = client.responses.create(
            model="gpt-5-nano",
            stream=True,
            prompt={
                "id": "pmpt_69558e4ff7d08194ace89b24d12f6d630a5b47b0d1492450",
                "version": "4",
                "variables": {
                    "context": f"{docs}",
                    "question": f"{query}"
                    }
            }
        )

        for event in stream:
            print(event)



docs = '''page_content='{"source_url": "https://www.apstylebook.com/ap_stylebook/professor", "entry_header": "professor", "text_content": "Never abbreviate. Lowercase before a name, but capitalize Professor Emeritus as a conferred title before a name: Professor Emeritus Susan Johnson. Do not continue in second reference unless part of a quotation. See academic titles, emeritus and titles."}' metadata={'source': '/Users/Bettina/side_quests/ap_style_app/data/cleaned/2025-12-31_cleaned.jsonl', 'seq_num': 110} 0.76633906
page_content='{"source_url": "https://www.apstylebook.com/ap_stylebook/emeritus", "entry_header": "emeritus", "text_content": "This word often is added to formal titles to denote that individuals who have retired retain their rank or title. When used, place emeritus after the formal title, in keeping with the general practice of academic institutions: Professor Emeritus Samuel Eliot Morison, Dean Emeritus Ashanti Washington. Or: Samuel Eliot Morison, professor emeritus of history; Ashanti Washington, dean emeritus. See gender-neutral language; professor."}' metadata={'source': '/Users/Bettina/side_quests/ap_style_app/data/cleaned/2025-12-31_cleaned.jsonl', 'seq_num': 109} 0.8408373
page_content='{"source_url": "https://www.apstylebook.com/ap_stylebook/pride-pride", "entry_header": "Pride, pride", "text_content": "Capitalize Pride when referring to events or organizations honoring LGBTQ+ communities and on subsequent references. Twin Cities Pride. \u201cAre you going to Pride?\u201d she asked. It\u2019s Pride Day. Several cities are holding Pride events this weekend. Lowercase pride when referring to generic events or the general concept of LGBTQ+ pride. He attended a gay pride parade. Pride Day is June 28 but is observed internationally on and in the days before the last Sunday in June, with some celebrations happening at other times of the month or year, frequently hinging on local climate or competition from nearby events. See gender, sex and sexual orientation."}' metadata={'source': '/Users/Bettina/side_quests/ap_style_app/data/cleaned/2025-12-31_cleaned.jsonl', 'seq_num': 129} 1.0981177
page_content='{"source_url": "https://www.apstylebook.com/ap_stylebook/what-s-new-in-the-57th-edition", "entry_header": "What's New in the 57th edition", "text_content": "This edition of the AP Stylebook features three new chapters, two new sections \u2014 and a new primary dictionary. We are making our first change in our primary dictionary in decades, now turning to Merriam-Webster as our first source. We don't take such a switch lightly, as AP style is informed by the spelling and styling recommended by our main dictionary. In recent years, we have seen that Merriam-Webster is more up to date and more in line with our approach. In making the change to our new primary dictionary, we carefully compared our guidance with Merriam-Webster's. We believe that a stylebook is different from a dictionary, and in doing this comparison, we eliminated many terms already listed in Merriam-Webster. We believe strongly that writers and editors need both a stylebook and a dictionary, so we recommend you use your AP Stylebook in concert with the Merriam-Webster dictionary for the most complete guidance. New chapters: Criminal Justice chapter: This new chapter gives extensive guidance on many issues related to crime and criminal justice coverage, including language; mug shots and other photos; graphic material; issues with initial reports by police and others; interviewing victims and family members; source development; and accountability journalism. It also pulls together entries that previously were listed individually throughout the book, and updates several of them. New guidance includes the term child sexual abuse images (not child porn ); the terms used for people who are or were in prison or jail; the terms juvenile and minor; and the terms sex work and sex workers. We now say the terms assault weapons or assault rifles may be used in headlines and in first reference because that is how the group of firearms has become commonly known. But high in the story, give specifics about the types of guns at issue in any given law or story. We also updated guidance on the term Taser. Artificial Intelligence chapter: Provides caveats and best practices about covering artificial intelligence. For example: Don't use language that attributes human characteristics to generative AI tools. Be aware that these tools often can be wrong or basically make things up. Be aware that they are trained by people with inherent biases that can affect the responses given by these bots. Also, 11 key AI-related terms with definitions and explanations. Technology chapter: Pulls together terms and guidance related to technology and social media that previously had appeared individually throughout the book. Many of those terms have been updated. Among the updates: We've loosened the restrictions on use of the term cyberattack. And we now say to avoid the terms tweet or tweeted. Instead: posted on the social platform X or posted on X. In addition, we made a number of updates to the Social Media Reporting chapter. Two new sections: Digital journalism: Describes best practices in digital journalism and storytelling. For example: All elements that feed into a story, photo or video \u2014 from the headline to the SEO title to the social graphic for Instagram \u2014 should be viewed as an act of journalism and meet the standards set by your newsroom. Checklist for self-editing (and for reporting and writing): Lists pointers to help make your reporting and writing much stronger and make basic editing more thorough before reaching the editor's desk. Highlights of other new or revised entries: Climate change, climate crisis: Revised guidance allows the term climate crisis, in addition to climate change, in broad references to the general state of the climate. The entry gives details on when one term or the other is better, and says to use the term climate crisis sparingly. We also added a number of terms, including community solar, direct air capture and energy transition. Race-related coverage: Updated guidance says to generally use the term Native Americans in broad references when referring to two or more people of different tribal affiliations within the contiguous U.S. geographic boundaries. The term Indigenous people(s) is a broad umbrella term, describing the original inhabitants of a place globally. The term does not capture the political relationship or political status of Native American tribes or people, so use it only when the broad description is accurate. Be specific about a person's citizenship and/or affiliation. The term American Indians is generally considered outdated. The guidance gives additional detail on these terms and other language considerations. Also in the race-related coverage entry: new guidance that locs is our style for a rope-like hairstyle that is a common protective hairstyle among Black people. Specify dreadlocks, dreads when referring to people with the hairstyle who are of Jamaican descent or Rastafarian belief. Locks refers to hair in general. Gender, sex and sexual orientation: New guidance to avoid using male and female as modifiers that could convey assumptions about gender roles, such as male nurse, male nanny, female bodybuilder. Revised guidance on the term bisexual. (See the 2023 section below for more updates in this umbrella entry.) Obesity: A new entry notes that people with obesity, people of higher weights and people who prefer the term fat use diverse terms \u2014 including those and others \u2014 in reference to themselves. Use care and precision, considering the impact of specific words and the terms used by the people you are writing about. When possible, ask people how they want to be described. The phrasing people with obesity or a person with obesity is acceptable when a general term is needed and is relevant, unless a group or person prefers other terms. Avoid the modifier obese when possible. Crisis hotlines: We now say AP stories may include publishable editor's notes with detail about crisis hotlines in stories about suicide, sexual assault, domestic violence, mental illness, substance abuse and other topics. Suicide: Additions to previous guidance, including more details on crisis hotlines. Homelessness: Updated guidance notes that some advocates and others prefer the term unhoused in an effort to focus on a person's lack of shelter. However, people without homes may have some sort of housing. So use unhoused only when quoting people, if an organization uses the term or if people use it for themselves. As with the homeless, avoid the term the unhoused. Terrorism: This revised guidance says AP is not using the terms terrorism or terrorist for specific actions, people or groups, other than in direct quotations or when attributed to authorities or others. Instead, we describe specific atrocities, massacres, bombings, assassinations and other such actions. Numerals intro: An expanded introduction gives more details on when, in general, to use figures rather than words for 1 through 9. That includes ages (of people, animals, events or things), and when preceding a unit of measure (inches, pounds, miles, quarts, temperature degrees, etc.) \u2014 except for time measurements such as seconds, days, years, etc. Generally spell out zero, though the figure 0 may be appropriate in technical contexts or in ranges. Note there are no changes in style, which calls for generally spelling out one through nine except as noted in the extended guidance. The entry also retains the other individual situations (addresses, court rulings, etc.) in which we use figures rather than words for 1 through 9. Prefixes: Revised entry pulls together in one section the prefixes (except those related to measurements) that previously had been listed separately. A 2024 change: We no longer generally use a hyphen with these prefixes: out-, post-, pre-, re-. This change aligns style on those prefixes both with our overall guidance and with Merriam-Webster. Another 2024 change: no hyphen in semiautomatic and semiautonomous, adding those to the other no-hyphen semi- constructions. Suffixes: Revised entry pulls together in one section the suffixes that previously had been listed separately. Lists, bulleted lists: Revised guidance says that while AP continues to use dashes instead of bullets to introduce individual sections of a list in news stories, we now may use bullets in other formats.That expands on previous guidance that bullets are always an option for non-AP content in all formats. The revision also says to use no punctuation at the end of a single word or single phrase in each section of a list, but use a period after a sentence in a bulleted item. We previously said to use a period in all cases, including after phrases or single words in a list. So-called: Revised guidance recommends avoiding so-called, which can be seen as mocking or derogatory. Instead, use more words: what are often known as; what are sometimes known as; what supporters call; what opponents call, etc. Designated days, weeks, months: New entry says to capitalize all words in the name of a designated or branded day, week, month or other time period: Black History Month, Mental Health Awareness Month, World Religion Day, International Women's Day. Lowercase the time period in informal descriptions: Memorial Day weekend, Christmas week. Lying in state: Revised guidance says that while only people who are entitled to a state funeral may formally lie in state, the term is sometimes used informally by government leaders and is generally acceptable. Media: Revised entry recommends avoiding writing in a way that implies media are monolithic. Be specific when referring to, for example, news media, social media or paid media. Refer to specific organizations or companies individually when relevant. Abortion: Added guidance to be specific when possible about the details of a person's or group's beliefs or positions. Weather event: New entry says that when possible, avoid this term and instead be specific if the reference is to a specific flood, landslide, mudslide, hurricane, etc. UFOs, UAPs: New entry discusses use of the term unidentified anomalous phenomena, or UAPs, for what have long been called UFOs, short for unidentified flying objects. Sexually transmitted disease, sexually transmitted infection: New entry discusses use of these terms and the shorthand STD(s) and STI(s). Quotations in the news: Addition to this entry advises to in general, use the verb said. The verb announced is acceptable when referring to an announcement. Generally avoid wording such as claimed, admitted, conceded, etc., which can sound loaded or judgmental. The entry gives additional guidance on attribution. Unique: Revised guidance says it's OK to describe something as very unique when the sense is highly unusual, rare, etc. But don't use very unique when the sense is one of a kind. 2023 updates made on AP Stylebook Online and now in the print book: Expanded guidance on climate change and the climate crisis, with new entries such as carbon dioxide, carbon footprint, desertification and greenwashing. New philanthropy terms including nonprofit vs. not-for-profit, GivingTuesday, LYBUNT and crowdfunding. A change in AP style from LGBTQ to LGBTQ+ to make it more inclusive. Also updates on deadnaming, queer, transgender and other gender-related terms and points. Expanded guidance on the right and wrong uses of the term Hawaiian(s). A new entry on the Civil Rights Movement, which should be capitalized when referring to the specific historical period in the U.S. mainly in the 1950s and '60s. A change to capitalize the Hajj, the pilgrimage to Mecca. Guidance that the names Czechia and the Czech Republic are both acceptable. The addition of B.C.E. and C.E. as acceptable options, in addition to B.C. and A.D. A new entry on euthanasia, medically assisted suicide, physician-assisted suicide that spells out proper usage for each term. A new sequential designations section of the numerals entry. Revised guidance on the word incident. Revision to delete the hyphen from G7 and G20. Deletions: We have removed some material from the print book to make room for new guidance. Sports agate examples are now only on Stylebook Online. The Media Law chapter is online only. Most company names and details, as well as the Digital Security for Journalists chapter, have been deleted."}' metadata={'source': '/Users/Bettina/side_quests/ap_style_app/data/cleaned/2025-12-31_cleaned.jsonl', 'seq_num': 1} 1.1742811
'''

prompt = Prompt(docs, "how do i say professor in ap style")
prompt.synthesize()


